@page "/collection"
@using TcgFront.Models.Dtos
@using TcgFront.Services
@inject CardService CardService
@layout TcgFront.Layout.MainLayout

<PageTitle>Collection</PageTitle>

<div class="container-fluid">
    @if (cards == null)
    {
        <div class="d-flex justify-content-center">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Cargando...</span>
            </div>
        </div>
    }
    else{
        <div class="card-grid">
            @foreach(var card in cards)
            {
                <div>
                    <div class="card-image-container">
                        <img src="@card.ImageUrl"
                             alt="@card.Name"/>
                    </div>
                    
                    <div>
                        <h4>@card.Name</h4>

                        @if (card.Rarity != null)
                        {
                            <span class="card-rarity">@card.Rarity.Name</span>
                        }

                        <button class="btn btn-sm btn-outline-primary mt-2 w-100">
                            Ver Detalle
                        </button>
                    </div>
                </div>
            }
        </div>
    }
</div>

@code {
    private List<CardDto> cards;
    protected override async Task OnInitializedAsync()
    {
        cards = await CardService.GetAllCards();
    }
}