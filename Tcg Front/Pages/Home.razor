@page "/"
@using TcgFront.Services
@using TcgFront.Models
@inject CardService CardService

<PageTitle>Mercado TCG</PageTitle>

<div class="container-fluid">
    <h1 class="text-center my-4">Mercado de Cartas</h1>

    @if (cards == null)
    {
        <div class="d-flex justify-content-center">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Cargando...</span>
            </div>
        </div>
    }
    else
    {
        <div class="card-grid">
            @foreach (var card in cards)
            {
                <div class="tcg-card">
                    <div class="card-image-container">
                        <img src="@card.ImageUrl"
                             alt="@card.Name"
                             class="card-img" />
                    </div>

                    <div class="card-info">
                        <h4 class="card-name">@card.Name</h4>

                        @if (card.Rarity != null)
                        {
                            <span class="card-rarity">@card.Rarity.Name</span>
                        }

                        <button class="btn btn-sm btn-outline-primary mt-2 w-100">
                            Ver Detalle
                        </button>
                    </div>
                </div>
            }
        </div>
    }
</div>

@code {
    private List<CardDto> cards;

    protected override async Task OnInitializedAsync()
    {
        cards = await CardService.GetAllCards();
    }
}